<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v0.0.0-4615">
<title data-rh="true">Drone ‚áå  Game | XR Labs</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://quadcopter-ar.github.io/docs/getting-started/system-overview/drone-to-game"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Drone ‚áå  Game | XR Labs"><meta data-rh="true" name="description" content="8652; Game communication"><meta data-rh="true" property="og:description" content="8652; Game communication"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://quadcopter-ar.github.io/docs/getting-started/system-overview/drone-to-game"><link data-rh="true" rel="alternate" href="https://quadcopter-ar.github.io/docs/getting-started/system-overview/drone-to-game" hreflang="en"><link data-rh="true" rel="alternate" href="https://quadcopter-ar.github.io/docs/getting-started/system-overview/drone-to-game" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.43357d75.css">
<link rel="preload" href="/assets/js/runtime~main.5d7c886c.js" as="script">
<link rel="preload" href="/assets/js/main.fe79cc28.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Xtended Reality Labs Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.svg" alt="Xtended Reality Labs Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Xtended Reality Labs</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/getting-started/welcome">Getting Started</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/quadcopter-ar" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">üåú</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">üåû</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode (currently light mode)"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/getting-started/welcome">Getting Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/welcome">Welcome</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" tabindex="0" href="/docs/getting-started/system-overview/">System Overview</a><button aria-label="Toggle the collapsible sidebar category &#x27;System Overview&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/system-overview/game-system">Game System</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/system-overview/drone-system">Drone System</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/getting-started/system-overview/drone-to-game">Drone ‚áå  Game</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/build-your-first-game">How to get started building your own game</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/game-specific-documentation/quadcopter-pong">Game Specific</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/guides/connecting-drone-to-game">Guides</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/transfer-project">Steps to take to transfer project</a></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/">üè†</a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link breadcrumbsItemLink_e5ie">Getting Started</span></li><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/docs/getting-started/system-overview/">System Overview</a></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/docs/getting-started/system-overview/drone-to-game">Drone ‚áå  Game</a></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Drone <!-- -->‚áå<!-- --> Game communication</h1><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>WIP</h5></div><div class="admonition-content"><p>The names and usage of the files listed can change. If they have changed please update the following information to have
the correct information.</p></div></div><p>The communication system consists of two main sub systems.</p><ul><li>The connection scripts on the drone and the video transmission setup</li><li>The connection script from the game to the drone</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="on-the-drone-side">On the drone side<a class="hash-link" href="#on-the-drone-side" title="Direct link to heading">‚Äã</a></h2><p>There are two main scripts that run on the drone. <a href="https://github.com/quadcopter-ar/QuadcopterAR-Jetson-Nano-Unity-Bridge/blob/main/unity_test.py" target="_blank" rel="noopener noreferrer"><code>unity_test.py</code></a>
is responsible in handling communication that it receives from unity, for example a player sending an input command,
and sending these commands to the drone. This script is also responsible to make sure that Unity gets an updated relative positional
data from the quadcopter.</p><p>Since there is no current way to figure out where exactly the drone is, we currently send information from the game
about positioning the drone. The drone then responds with orientation and <em>relative</em> position, from where it started.
We use this data to then move the player around in the game world.</p><p><img loading="lazy" alt="Drone Communicating with game" src="/assets/images/drone_communication-6b02ff08d7dd953c462927c47d0f7455.svg" width="403" height="133"></p><hr><p>The other is <a href="https://github.com/quadcopter-ar/QuadcopterAR-Jetson-Nano-Unity-Bridge/blob/main/client_opencv.py" target="_blank" rel="noopener noreferrer"><code>client_opencv.py</code></a>.
The role of <code>client_opencv</code> is to take any images within the ZED camera and send them over to Unity so that Unity can display
the image internally. Rather than the game asking, the drone is always sending up to date video data from its cameras
to the game.</p><p><img loading="lazy" alt="Drone sending video to game" src="/assets/images/drone_video_communication-426939811803603e13e17bec29a97330.svg" width="403" height="133"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="on-the-game-side">On the game side<a class="hash-link" href="#on-the-game-side" title="Direct link to heading">‚Äã</a></h2><p>The game uses <a href="https://github.com/quadcopter-ar/Quadcopter-Prefabs/blob/master/Assets/Scripts/Drone%20Connection/DroneConnection.cs" target="_blank" rel="noopener noreferrer">DroneConnection.cs</a>
to communicate with the drone. This script is responsible to take any inputs being made by the game and to send those inputs
to the drone. The script also keeps track of the Drones&#x27; position and orientation. This is then also used to change the
players orientation and position.</p><p>It is highly suggested you understand this communication system well as this is currently where majority of the work
is taking place.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/quadcopter-ar/QuadcopterAR-Documentation/tree/master/docs/getting-started/system-overview/drone-to-game.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-02-20T10:58:31.000Z">2/20/2022</time></b> by <b>Vybhav Achar Bhargav</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/getting-started/system-overview/drone-system"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Drone System</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/getting-started/build-your-first-game"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">How to get started building your own game</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#on-the-drone-side" class="table-of-contents__link toc-highlight">On the drone side</a></li><li><a href="#on-the-game-side" class="table-of-contents__link toc-highlight">On the game side</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/welcome">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">Get In touch</div><ul class="footer__items"><li class="footer__item"><a href="mailto:max@cs.ucdaivs.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Email<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/quadcopter-ar/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2022 Xtended Reality Labs. Built with ‚ù§Ô∏è  at UC Davis.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.5d7c886c.js"></script>
<script src="/assets/js/main.fe79cc28.js"></script>
</body>
</html>